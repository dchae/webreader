<div id="reader"></div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Use the directory-style URL for epub.js to access the internal structure
    const url = "http://localhost:9292/library/<%= @file_id %>/";
    console.log("Loading EPUB from:", url);

    const book = ePub(url);
    const rendition = book.renderTo('reader', {width: 600, height: 400});
    const displayed = rendition.display();
  });
</script>
